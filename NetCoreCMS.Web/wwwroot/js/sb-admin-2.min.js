/*!
 * Start Bootstrap - SB Admin 2 v3.3.7+1 (http://startbootstrap.com/template-overviews/sb-admin-2)
 * Copyright 2013-2016 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap/blob/gh-pages/LICENSE)
 */
$(function () {
    $("#side-menu").metisMenu()
}), $(function () {
    $(window).bind("load resize", function () {
        var i = 50,
            n = this.window.innerWidth > 0 ? this.window.innerWidth : this.screen.width;
        n < 768 ? ($("div.navbar-collapse").addClass("collapse"), i = 100) : $("div.navbar-collapse").removeClass("collapse");
        var e = (this.window.innerHeight > 0 ? this.window.innerHeight : this.screen.height) - 1;
        e -= i, e < 1 && (e = 1), e > i && $("#page-wrapper").css("min-height", e-100 + "px")
    });

    var isMenuFound = false;
    for (var j = 0; j < 5; j++) {
        if (isMenuFound) continue;
        //console.log(j);
        for (var i = window.location, n = $("ul.nav a").filter(function() {
            //console.log(i);
            //console.log(this.href);
            //var n = i.substring(0, i.indexOf("?"));
            var tempPath = (i + "").replace(i.origin, "");
            var tempHref = this.href.replace(i.origin, "");
            if (this.href.indexOf("#") > 0) {
                tempHref = "";
            }
            //console.log(tempHref + " -> " + tempPath);

            if (isMenuFound) {
                tempHref = "a";
                tempPath = "b";
            }
            else {
                var tempPathSegments = tempPath.replace("/en/", "/").replace("/bn/", "/").replace("?", "/").split("/").filter(function(v) { return v !== '' });
                var tempHrefSegments = tempHref.replace("?", "/").split("/").filter(function(v) { return v !== '' });
                //console.log(tempHrefSegments);
                //console.log(tempPathSegments);
                //console.log(tempHrefSegments.length);
                for (var k = 0; k < tempHrefSegments.length - j && k < tempPathSegments.length; k++) {
                    isMenuFound = true;
                    if (tempHrefSegments[k] != tempPathSegments[k]) {
                        isMenuFound = false;
                        break;
                    }
                }
                if (isMenuFound == true) {
                    //console.log(tempHref + " -> " + tempPath);
                    tempHref = "a";
                    tempPath = "a";
                }
                else {
                    tempHref = "a";
                    tempPath = "b";
                }
            }
            return tempHref == tempPath
        }).addClass("active").parent(); ;) {
            if (!n.is("li")) break;
            n = n.parent().addClass("in active").parent()
        }
    }
});